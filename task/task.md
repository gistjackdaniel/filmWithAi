# SceneForge 사용자 인증 UI 개발 태스크 목록

## 📋 프로젝트 현황 분석

### ✅ 현재 구현된 기능
- [x] 기본 React + Vite 프로젝트 구조
- [x] Material-UI 테마 설정 (`src/theme/theme.js`)
- [x] Zustand 인증 스토어 (`src/stores/authStore.js`)
- [x] API 서비스 설정 (`src/services/api.js`)
- [x] 기본 라우팅 구조 (`src/App.jsx`)
- [x] 스플래시 스크린 (`src/components/SplashScreen.jsx`)
- [x] 보호된 라우트 컴포넌트 (`src/components/ProtectedRoute.jsx`)
- [x] 기본 로그인 페이지 (`src/pages/LoginPage.jsx`)
- [x] 대시보드 페이지 (`src/pages/Dashboard.jsx`)
- [x] 프로젝트 페이지 (`src/pages/ProjectPage.jsx`)

### 🔍 발견된 문제점
- [ ] Google OAuth 패키지 설정 오류 (`@google-oauth/google` → `@react-oauth/google`)
- [ ] 인증 플로우 완전성 부족
- [ ] 에러 처리 및 사용자 피드백 부족
- [ ] 반응형 디자인 미완성
- [ ] 접근성(Accessibility) 고려 부족

---

## 🎯 우선순위 태스크 목록

### 🔥 Phase 1: 긴급 수정 (1-2일)

#### 1.1 의존성 및 설정 수정
- [x] **Google OAuth 패키지 수정**
  - [x] `package.json`에서 `@google-oauth/google` 제거
  - [x] `@react-oauth/google` 설치 및 설정
  - [x] Google OAuth 클라이언트 ID 환경변수 설정
  - [x] `src/main.jsx`에 GoogleOAuthProvider 추가

#### 1.2 인증 플로우 개선
- [x] **로그인 페이지 UI/UX 개선**
  - [x] 디자인 시스템 색상 적용 (Primary: #2E3A59, Accent: #D4AF37)
  - [x] 로딩 상태 개선 (스피너 + 텍스트)
  - [x] 에러 메시지 표시 개선
  - [x] 반응형 디자인 적용 (모바일/태블릿/데스크톱)

- [x] **인증 상태 관리 개선**
  - [x] 토큰 만료 처리 로직 추가
  - [x] 자동 로그인 실패 시 명확한 에러 메시지
  - [x] 네트워크 오류 처리 개선

### 🚀 Phase 2: 핵심 기능 구현 (3-4일)

#### 2.1 사용자 프로필 관리
- [x] **사용자 프로필 컴포넌트 생성**
  - [x] `src/components/UserProfile.jsx` 생성
  - [x] 사용자 아바타, 이름, 이메일 표시
  - [x] 프로필 편집 기능 (선택사항)

- [x] **로그아웃 기능 개선**
  - [x] 대시보드에 로그아웃 버튼 추가
  - [x] 로그아웃 확인 모달
  - [x] 로그아웃 후 상태 정리

#### 2.2 인증 보안 강화
- [x] **토큰 관리 개선**
  - [x] 토큰 갱신 로직 구현
  - [x] 토큰 만료 시 자동 로그아웃
  - [x] 보안 토큰 저장 (httpOnly 쿠키 고려)

- [x] **세션 관리**
  - [x] 브라우저 탭 간 세션 동기화
  - [x] 자동 로그아웃 타이머 (선택사항)

### 🎨 Phase 3: UI/UX 개선 (2-3일)

#### 3.1 디자인 시스템 적용
- [x] **컴포넌트 스타일 통일**
  - [x] 모든 인증 관련 컴포넌트에 디자인 시스템 적용
  - [x] 다크/라이트 테마 지원
  - [x] 일관된 애니메이션 효과

- [x] **접근성 개선**
  - [x] ARIA 라벨 추가
  - [x] 키보드 네비게이션 지원
  - [x] 스크린 리더 호환성

#### 3.2 사용자 경험 개선
- [x] **온보딩 플로우**
  - [x] 첫 로그인 시 환영 메시지
  - [x] 앱 기능 소개 (선택사항)
  - [x] 사용법 가이드

- [x] **에러 처리 개선**
  - [x] 사용자 친화적 에러 메시지
  - [x] 재시도 옵션 제공
  - [x] 문제 해결 가이드 링크

### 🔧 Phase 4: 고급 기능 (1-2일)

#### 4.1 추가 인증 옵션
- [x] **다중 인증 방법**
  - [x] 이메일/비밀번호 로그인 (선택사항)
  - [x] 소셜 로그인 확장 (GitHub, Facebook 등)

#### 4.2 개발자 도구
- [x] **디버깅 도구**
  - [x] 인증 상태 디버그 패널 (개발 모드)
  - [x] API 요청/응답 로깅
  - [x] 토큰 정보 확인 도구

---

## 🎬 Phase 5: 타임라인 줌 기능 수정 (1일)

### 5.1 타임라인 줌 기능 개선
- [x] **시간 스케일 계산 로직 개선**
  - [x] `calculateTimeScale` 함수 개선 (줌 레벨에 따른 정확한 스케일 계산)
  - [x] 최소/최대 스케일 제한 추가 (0.01초~10초당 1픽셀)
  - [x] 줌 레벨이 너무 높을 때 스케일 보정 로직 추가

- [x] **동적 눈금 간격 계산**
  - [x] `calculateTickInterval` 함수 개선 (줌 레벨에 따른 세밀한 간격 조정)
  - [x] 0.5배~100배 줌 레벨에 따른 8단계 눈금 간격 설정
  - [x] 0.2초~5분 간격으로 동적 조정

- [x] **TimeRuler 컴포넌트 수정**
  - [x] 고정된 10초 간격 제거
  - [x] 줌 레벨에 따른 동적 눈금 간격 적용
  - [x] 외부에서 전달된 timeScale 우선 사용
  - [x] 줌 레벨에 따른 주요 눈금 판별 로직 개선

- [x] **TimelineScroll 컴포넌트 수정**
  - [x] 줌 레벨과 시간 스케일 props 추가
  - [x] 동적 씬 너비 계산 적용
  - [x] 스크롤 위치 계산 개선

- [x] **VirtualTimeline 컴포넌트 수정**
  - [x] 줌 레벨에 따른 동적 씬 너비 계산
  - [x] 시간 기반 레이아웃 개선
  - [x] 가상화 성능 최적화

- [x] **TimelineViewer 통합**
  - [x] 모든 하위 컴포넌트에 줌 레벨과 시간 스케일 전달
  - [x] 시간 기반 스크롤 네비게이션 개선
  - [x] 줌 변경 시 타임라인 레이아웃 동기화

### 5.2 문제 해결 결과
- [x] **2.5배 이상 줌에서 눈금과 영상 길이 불일치 문제 해결**
  - [x] 시간 스케일 계산 로직 개선으로 정확한 픽셀-시간 변환
  - [x] 동적 눈금 간격으로 줌 레벨에 맞는 적절한 눈금 표시
  - [x] 모든 줌 레벨에서 일관된 시간 표시 정확성 확보

- [x] **확대 시 씬 간 공간 문제 해결**
  - [x] TimelineViewer에서 씬 카드 너비 계산 로직 개선
  - [x] SceneCard 컴포넌트에서 외부 너비 우선 사용
  - [x] calculateMinSceneWidth 함수 개선으로 줌 레벨별 최소 너비 정확 계산
  - [x] 줌 레벨이 높을 때도 씬 간 연속적인 배치 보장
  - [x] 시간 기반 너비 계산과 줌 레벨 기반 최소 너비 조합으로 정확한 레이아웃

---

## 📊 진행 상황 추적

### 현재 진행률
- **Phase 1**: 100% (8/8 태스크 완료) ✅
- **Phase 2**: 100% (6/6 태스크 완료) ✅
- **Phase 3**: 100% (8/8 태스크 완료) ✅
- **Phase 4**: 100% (4/4 태스크 완료) ✅
- **Phase 5**: 100% (6/6 태스크 완료) ✅
- **Phase 6**: 100% (3/3 태스크 완료) ✅
- **Phase 7**: 100% (9/9 태스크 완료) ✅
- **Phase 8**: 100% (9/9 태스크 완료) ✅

### 전체 진행률: 100% (53/53 태스크 완료) 🎉

---

## 🎯 다음 액션 아이템

### 즉시 실행할 태스크 (오늘)
1. [x] Google OAuth 패키지 수정 및 재설치
2. [x] 환경변수 설정 (.env 파일 생성)
3. [x] 로그인 페이지 UI 개선
4. [x] 기본 에러 처리 구현
5. [x] 온보딩 플로우 구현
6. [x] 에러 처리 개선
7. [x] 타임라인 줌 기능 수정

### 이번 주 목표
- [x] Phase 1 완료 (긴급 수정사항 해결)
- [x] Phase 2 완료 (사용자 프로필 관리)
- [x] Phase 3 완료 (UI/UX 개선)
- [x] Phase 4 완료 (고급 기능)
- [x] Phase 5 완료 (타임라인 줌 기능 수정)

### 🎉 프로젝트 완료!
모든 사용자 인증 UI 개발 태스크와 타임라인 줌 기능 수정이 성공적으로 완료되었습니다.

---

## 🎬 Phase 6: 콘티 상세 모달 개선 (완료)

### 6.1 ConteDetailModal 컴포넌트 개선
- [x] **이미지 생성 중 상태 표시 기능 추가**
  - [x] `isGeneratingImages` prop 추가
  - [x] `imageGenerationProgress` prop 추가
  - [x] 이미지 생성 중 로딩 스피너 표시
  - [x] 진행률 퍼센트 표시

- [x] **이미지 표시 로직 개선**
  - [x] 이미지 URL이 있거나 이미지 생성 중일 때 이미지 영역 표시
  - [x] 이미지 생성 중일 때 CircularProgress 컴포넌트 표시
  - [x] 진행률이 있을 때 퍼센트 표시
  - [x] 배경색 설정으로 일관된 UI 제공

- [x] **ConteGenerationPage 통합**
  - [x] ConteDetailModal에 새로운 props 전달
  - [x] 이미지 생성 상태와 진행률 정보 연결
  - [x] 기존 기능과의 호환성 유지

### 6.2 사용자 경험 개선 결과
- [x] **이미지 생성 과정 시각화**
  - [x] 사용자가 이미지 생성 진행 상황을 실시간으로 확인 가능
  - [x] 진행률 표시로 예상 완료 시간 파악 가능
  - [x] 로딩 상태로 시스템이 작업 중임을 명확히 표시

- [x] **에러 처리 및 재시도 기능**
  - [x] 이미지 로딩 실패 시 재시도 버튼 제공
  - [x] 에러 상태에 따른 명확한 피드백
  - [x] 사용자가 직접 이미지 재생성 가능

- [x] **일관된 UI/UX**
  - [x] 콘티 리스트와 상세 모달에서 동일한 이미지 표시 로직
  - [x] Material-UI 디자인 시스템 일관성 유지
  - [x] 반응형 디자인 적용

---

## 🎬 Phase 7: 프로젝트 저장 및 타임라인 이동 개선 (완료)

### 7.1 프로젝트별 타임라인 이동 기능 구현
- [x] **ConteGenerator 컴포넌트 개선**
  - [x] `projectId` prop 추가로 실제 프로젝트 ID 전달
  - [x] `handleViewTimeline` 함수에서 동적 프로젝트 ID 사용
  - [x] 실제 프로젝트 ID가 있으면 해당 프로젝트 페이지로, 없으면 임시 프로젝트로 이동

- [x] **ConteGenerationPage 통합**
  - [x] ConteGenerator에 `projectId` prop 전달
  - [x] 기존 `temp-project-id` 하드코딩 제거
  - [x] 실제 프로젝트 ID 기반 타임라인 이동

- [x] **DirectStoryPage 통합**
  - [x] ConteGenerator에 `projectId` prop 전달
  - [x] 전달받은 프로젝트 ID 우선 사용
  - [x] 프로젝트 저장 후 `currentProject` 상태 업데이트

- [x] **Dashboard 프로젝트 생성 개선**
  - [x] 프로젝트 생성 시 `projectId`와 `projectTitle`을 DirectStoryPage로 전달
  - [x] 네비게이션 state를 통한 프로젝트 정보 전달
  - [x] 프로젝트 제목을 프로젝트 데이터에 반영

### 7.2 프로젝트 저장 및 이동 플로우 개선
- [x] **실제 프로젝트 ID 기반 이동**
  - [x] 임시 프로젝트 ID(`temp-project-id`) 하드코딩 제거
  - [x] 실제 생성된 프로젝트 ID로 타임라인 페이지 이동
  - [x] 프로젝트별 고유 페이지 URL 구조 유지

- [x] **프로젝트 저장 후 상태 관리**
  - [x] 프로젝트 생성 후 `currentProject` 상태 업데이트
  - [x] 저장된 프로젝트 페이지로 정확한 이동
  - [x] 프로젝트 정보의 일관성 보장

- [x] **사용자 경험 개선**
  - [x] 프로젝트 생성부터 타임라인 이동까지 일관된 플로우
  - [x] 실제 프로젝트 ID 기반의 안정적인 페이지 이동
  - [x] 프로젝트별 고유 URL로 북마크 및 공유 가능

### 7.3 문제 해결 결과
- [x] **임시 페이지 이동 문제 해결**
  - [x] `ConteGenerator.jsx`에서 `temp-project-id` 하드코딩 제거
  - [x] 실제 프로젝트 ID를 props로 전달받아 사용
  - [x] 프로젝트별 고유 페이지로 정확한 이동

- [x] **프로젝트 저장 플로우 개선**
  - [x] 프로젝트 생성 시 전달받은 프로젝트 정보 활용
  - [x] 프로젝트 제목을 프로젝트 데이터에 반영
  - [x] 저장 후 올바른 프로젝트 페이지로 이동

- [x] **전체 플로우 일관성 확보**
  - [x] 대시보드 → 프로젝트 생성 → 스토리 작성 → 콘티 생성 → 타임라인 이동
  - [x] 각 단계에서 프로젝트 ID의 일관성 유지
  - [x] 사용자가 생성한 프로젝트의 고유성 보장

---

## 🎬 Phase 8: 스케줄링 필드 프로젝트 저장 개선 (완료)

### 8.1 스케줄링 관련 필드 프로젝트 저장 구현
- [x] **DirectStoryPage 콘티 처리 개선**
  - [x] `handleConteGenerationComplete` 함수에서 스케줄링 필드 추가
  - [x] `requiredPersonnel`, `requiredEquipment`, `camera` 필드 포함
  - [x] 기본값 설정으로 필드 누락 방지

- [x] **ConteGenerationPage 스케줄링 필드 확인**
  - [x] 기존에 스케줄링 필드가 포함되어 있음을 확인
  - [x] API 응답의 실제 필드 값들을 콘솔에 출력
  - [x] DB 저장 시 스케줄링 필드 포함 확인

- [x] **SimpleSchedulePage 스케줄링 필드 표시**
  - [x] `requiredPersonnel`, `requiredEquipment`, `camera` 필드 표시 확인
  - [x] 카메라 정보 파싱 함수로 "C1C3" → "C1, C3" 변환
  - [x] 스케줄 테이블에서 스케줄링 정보 정확히 표시

### 8.2 프로젝트 저장 시 스케줄링 필드 포함
- [x] **콘티 데이터 처리 개선**
  - [x] 백엔드 API 응답에서 스케줄링 필드 포함 확인
  - [x] 프론트엔드에서 스케줄링 필드 기본값 설정
  - [x] 프로젝트 저장 시 스케줄링 필드 누락 방지

- [x] **디버깅 로그 추가**
  - [x] 콘티 저장 시 스케줄링 필드 값 로그 출력
  - [x] 프로젝트 저장 과정에서 필드 포함 여부 확인
  - [x] 스케줄링 정보의 정확성 검증

### 8.3 문제 해결 결과
- [x] **스케줄링 필드 누락 문제 해결**
  - [x] `DirectStoryPage`에서 스케줄링 필드 기본값 추가
  - [x] 프로젝트 저장 시 필수 스케줄링 정보 포함
  - [x] 스케줄 페이지에서 정확한 정보 표시

- [x] **데이터 일관성 확보**
  - [x] 백엔드 API 응답과 프론트엔드 처리 일치
  - [x] 스케줄링 관련 필드의 완전성 보장
  - [x] 프로젝트별 스케줄링 정보의 정확성

- [x] **사용자 경험 개선**
  - [x] 스케줄 페이지에서 완전한 촬영 정보 표시
  - [x] 필요 인력, 장비, 카메라 정보의 명확한 표시
  - [x] 실제 촬영 계획에 필요한 모든 정보 제공

---

## 📝 참고사항

### 기술 스택
- **Frontend**: React 18 + Vite
- **UI Framework**: Material-UI (MUI)
- **상태 관리**: Zustand
- **인증**: Google OAuth 2.0
- **스타일링**: CSS-in-JS (MUI Theme)

### 디자인 시스템
- **Primary Color**: #2E3A59 (Deep Slate Blue)
- **Accent Color**: #D4AF37 (Cinematic Gold)
- **Background**: #1B1B1E (Charcoal Black)
- **Typography**: Inter (Google Fonts)

### 타임라인 줌 기능 개선사항
- **줌 레벨**: 0.5배~100배 지원
- **시간 스케일**: 0.01초~10초당 1픽셀 범위
- **눈금 간격**: 0.2초~5분 동적 조정
- **정확성**: 모든 줌 레벨에서 시간 표시 정확성 확보

### 우선순위 기준
1. **안정성**: 앱이 정상 작동하는지
2. **사용성**: 사용자가 쉽게 사용할 수 있는지
3. **접근성**: 모든 사용자가 접근할 수 있는지
4. **확장성**: 향후 기능 추가가 용이한지

---

**마지막 업데이트**: 2024년 7월 10일  
**작성자**: SceneForge 개발팀  
**버전**: 1.1 